<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.9.xsd">
    <changeSet author="winterfir" id="create table employees">
        <createTable tableName="employees">
            <column name="id" type="BIGINT">
                <constraints nullable="false"
                             primaryKey="true"
                             primaryKeyName="pk_employees"/>
            </column>
            <column name="first_name" type="VARCHAR(255)"/>
            <column name="last_name" type="VARCHAR(255)"/>
            <column name="ready_to_business_trip" type="BOOLEAN"/>
            <column name="second_name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="winterfir" id="create table programming_language_grades">
        <createTable tableName="programming_language_grades">
            <column name="id" type="BIGINT">
                <constraints nullable="false"
                             primaryKey="true"
                             primaryKeyName="pk_programming_language_grades"/>
            </column>
            <column name="grade" type="INTEGER"/>
            <column name="title" type="INTEGER"/>
            <column name="timestamp" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="employee_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="winterfir" id="create table language_grades">
        <createTable tableName="language_grades">
            <column name="id" type="BIGINT">
                <constraints nullable="false"
                             primaryKey="true"
                             primaryKeyName="pk_language_grades"/>
            </column>
            <column name="grade" type="INTEGER"/>
            <column name="title" type="INTEGER"/>
            <column name="timestamp" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="employee_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="winterfir" id="create table directions">
        <createTable tableName="directions">
            <column name="id" type="BIGINT">
                <constraints nullable="false"
                             primaryKey="true"
                             primaryKeyName="pk_directions"/>
            </column>
            <column name="direction_grade" type="INTEGER"/>
            <column name="direction_title" type="INTEGER"/>
            <column name="end_working_timestamp" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="start_working_timestamp" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="status" type="BOOLEAN"/>
            <column name="employee_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="winterfir" id="create table employees_programming_language">
        <createTable tableName="employees_programming_language">
            <column name="employee_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="programming_language_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="winterfir" id="create table employees_projects">
        <createTable tableName="employees_projects">
            <column name="employees_id" type="BIGINT">
                <constraints nullable="false"
                             primaryKey="true"
                             primaryKeyName="pk_employees_projects"/>
            </column>
            <column name="projects_id" type="BIGINT">
                <constraints nullable="false"
                             primaryKey="true"
                             primaryKeyName="pk_employees_projects"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="winterfir" id="create table employees_directions">
        <createTable tableName="employees_directions">
            <column name="employee_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="directions_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="winterfir" id="create table employees_language">
        <createTable tableName="employees_language">
            <column name="employee_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="language_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="winterfir" id="create table projects">
        <createTable tableName="projects">
            <column name="id" type="BIGINT">
                <constraints nullable="false"
                             primaryKey="true"
                             primaryKeyName="pk_projects"/>
            </column>
            <column name="direction_grade" type="INTEGER"/>
            <column name="title" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="winterfir" id="create fk_employees_projects_employees">
        <addForeignKeyConstraint baseColumnNames="employees_id"
                                 baseTableName="employees_projects"
                                 constraintName="fk_employees_projects_employees"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="employees"
                                 validate="true"/>
    </changeSet>
    <changeSet author="winterfir" id="create fk_employees_programming_language_employee">
        <addForeignKeyConstraint baseColumnNames="employee_id"
                                 baseTableName="employees_programming_language"
                                 constraintName="fk_employees_programming_language_employee"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="employees"
                                 validate="true"/>
    </changeSet>
    <changeSet author="winterfir" id="create fk_language_grades_employee">
        <addForeignKeyConstraint baseColumnNames="employee_id"
                                 baseTableName="language_grades"
                                 constraintName="fk_language_grades_employee"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="employees"
                                 validate="true"/>
    </changeSet>
    <changeSet author="winterfir" id="create fk_directions_employee">
        <addForeignKeyConstraint baseColumnNames="employee_id"
                                 baseTableName="directions"
                                 constraintName="fk_directions_employee"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="employees"
                                 validate="true"/>
    </changeSet>
    <changeSet author="winterfir" id="create fk_employees_directions_employee">
        <addForeignKeyConstraint baseColumnNames="employee_id"
                                 baseTableName="employees_directions"
                                 constraintName="fk_employees_directions_employee"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="employees"
                                 validate="true"/>
    </changeSet>
    <changeSet author="winterfir" id="create fk_employees_language_employee">
        <addForeignKeyConstraint baseColumnNames="employee_id"
                                 baseTableName="employees_language"
                                 constraintName="fk_employees_language_employee"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="employees"
                                 validate="true"/>
    </changeSet>
    <changeSet author="winterfir" id="create fk_programming_language_grades_employee">
        <addForeignKeyConstraint baseColumnNames="employee_id"
                                 baseTableName="programming_language_grades"
                                 constraintName="fk_programming_language_grades_employee"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="employees"
                                 validate="true"/>
    </changeSet>
    <changeSet author="winterfir" id="create fk_employees_directions_directions">
        <addForeignKeyConstraint baseColumnNames="directions_id"
                                 baseTableName="employees_directions"
                                 constraintName="fk_employees_directions_directions"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="directions"
                                 validate="true"/>
    </changeSet>
    <changeSet author="winterfir" id="create fk_employees_programming_language_programming_language">
        <addForeignKeyConstraint baseColumnNames="programming_language_id"
                                 baseTableName="employees_programming_language"
                                 constraintName="fk_employees_programming_language_programming_language"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="programming_language_grades"
                                 validate="true"/>
    </changeSet>
    <changeSet author="winterfir" id="create uk_employees_programming_language_programming_language">
        <addUniqueConstraint columnNames="programming_language_id"
                             constraintName="uk_employees_programming_language_programming_language"
                             tableName="employees_programming_language"/>
    </changeSet>
    <changeSet author="winterfir" id="create uk_employees_directions_directions">
        <addUniqueConstraint columnNames="directions_id"
                             constraintName="uk_employees_directions_directions"
                             tableName="employees_directions"/>
    </changeSet>

    <changeSet author="winterfir" id="create fk_employees_language_language">
        <addForeignKeyConstraint baseColumnNames="language_id"
                                 baseTableName="employees_language"
                                 constraintName="fk_employees_language_language"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="language_grades"
                                 validate="true"/>
    </changeSet>
    <changeSet author="winterfir" id="create uk_employees_language_language">
        <addUniqueConstraint columnNames="language_id"
                             constraintName="uk_employees_language_language"
                             tableName="employees_language"/>
    </changeSet>
    <changeSet author="winterfir" id="create fk_employees_projects_projects">
        <addForeignKeyConstraint baseColumnNames="projects_id"
                                 baseTableName="employees_projects"
                                 constraintName="fk_employees_projects_projects"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="projects"
                                 validate="true"/>
    </changeSet>
    <changeSet author="winterfir" id="create direction_id_seq">
        <createSequence cacheSize="1"
                        cycle="false"
                        dataType="bigint"
                        incrementBy="1"
                        maxValue="9223372036854775807"
                        minValue="1"
                        sequenceName="direction_id_seq"
                        startValue="1"/>
    </changeSet>
    <changeSet author="winterfir" id="create employee_id_seq">
        <createSequence cacheSize="1"
                        cycle="false"
                        dataType="bigint"
                        incrementBy="1"
                        maxValue="9223372036854775807"
                        minValue="1"
                        sequenceName="employee_id_seq"
                        startValue="1"/>
    </changeSet>
    <changeSet author="winterfir" id="create language_id_seq">
        <createSequence cacheSize="1"
                        cycle="false"
                        dataType="bigint"
                        incrementBy="1"
                        maxValue="9223372036854775807"
                        minValue="1"
                        sequenceName="language_id_seq"
                        startValue="1"/>
    </changeSet>
    <changeSet author="winterfir" id="create programming_language_id_seq">
        <createSequence cacheSize="1"
                        cycle="false"
                        dataType="bigint"
                        incrementBy="1"
                        maxValue="9223372036854775807"
                        minValue="1"
                        sequenceName="programming_language_id_seq"
                        startValue="1"/>
    </changeSet>
    <changeSet author="winterfir" id="create project_id_seq">
        <createSequence cacheSize="1"
                        cycle="false"
                        dataType="bigint"
                        incrementBy="1"
                        maxValue="9223372036854775807"
                        minValue="1"
                        sequenceName="project_id_seq"
                        startValue="1"/>
    </changeSet>
</databaseChangeLog>
